% This is based on the LLNCS.DEM the demonstration file of
% the LaTeX macro package from Springer-Verlag
% for Lecture Notes in Computer Science,
% version 2.4 for LaTeX2e as of 16. April 2010
%
% See http://www.springer.com/computer/lncs/lncs+authors?SGWID=0-40209-0-0-0
% for the full guidelines.
%
\documentclass{llncs}

\begin{document}

\title{Compiler Support for Testing Numerical HPC Applications}
%
\titlerunning{Hamiltonian Mechanics}  % abbreviated title (for running head)
%                                     also used for the TOC unless
%                                     \toctitle is used
%
\author{Khalid Ahmad\inst{1} \and Michael Wolfe\inst{2}}
%
\authorrunning{Khalid Ahmad et al.} % abbreviated author list (for running head)
%
%%%% list of authors for the TOC (use if author list has to be modified)
\tocauthor{Khalid Ahmad, Roger Temam}
%
\institute{University of Utah,
, Salt Lake City, Utah, USA\\
\email{Khalid@cs.utah.edu}
\and
PGI Compilers and tools; an NVIDIA brand, Portland, OR, USA}

\maketitle              % typeset the title of the contribution

\begin{abstract}
We describe compiler and runtime support to help users automate testing high performance numerical programs.
In the most general approach, the programmer adds API calls or compiler directives to the program where intermediate results should be saved or compared.
Starting with a known correct program, a sequence of intermediate \emph{golden results} will be saved to a file.
In subsequent test runs, the same API calls or directives are used to compare the intermediate results in the running program against the \emph{golden results} previously saved.
We also describe the special case of an OpenACC program targeting GPUs, where the existing data directives and clauses are used to control the compare.
The compiler generates code to run each computational kernel on both the host and the GPU, and compares the results after each kernel execution.

\dots
\keywords{Program testing}
\end{abstract}
%



\input{Intro}
\input{Problem}
%


\section{Obstacles for Unit Tests in HPC}

\section {What Problems are addressed}
\subsection{comparing results between a known good version (golden) and a version being tested}
  - deciding what values to save / compare
  - deciding when to save / compare values
  - deciding how to do the compare, esp. for floating point
\subsection{Usage Scenarios}
  - user driven, save golden values to a file, compare test version against those
    using API calls or directives
    user decides what values to save/compare, when to compare
  - automatic online compare, compare CPU vs GPU computations
    can either compare after each kernel launch, or
    compare all values present on device against golden host values


\section{Implementation Details}
   compare options - tolerance, IEEE comparisons
   where in the runtime it is implemented (?)
   challenges: Fortran vs C, gcc-specific header file functionality
   saving a golden file, file block headers to compare execution sequence

\section{Experimentation}
   cost overhead of compare
   cost overhead of autocompare
   what kinds of differences we find

\section{Other Uses of a Compare Feature}
   compare different algorithms
   compare compiler optimizations
   compare different hosts



\begin{figure}
\vspace{2.5cm}
\caption{This is the caption of the figure displaying a white eagle and
a white horse on a snow field}
\end{figure}


\begin{table}
\caption{Environment Variables }
\begin{center}
\begin{tabular}{r@{\quad}ll}
\hline
\multicolumn{1}{l}{\rule{0pt}{12pt} export\_PGICOMPARE = […, …, …] 
}&\multicolumn{2}{l}{  Description }\\[2pt]
\hline\rule{0pt}{12pt}
FILE= & Name of data file & \\
CREATE   &   Specifies that this is the run that will produce the reference results& \\
COMPARE   &   Specifies that the current run will be compared with a reference file& \\
VERBOSE   & Outputs all details of comparison& \\
PATCH   &   Patch with correct values& \\
STOP   &   Stop at first difference & \\
SKIP=    & Skip differences or don’t compare variable & \\
REPORT=    & Report first differences & \\
TOL [ABS, REL, ULP, IEEE]  & Specifies the desired tolerance type &\\[2pt]
\hline
\end{tabular}
\end{center}
\end{table}


\bibliographystyle{IEEEtran}
\bibliography{main}



\end{document}
